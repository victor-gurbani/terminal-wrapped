<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Bash History Wrapped</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .section { margin: 20px 0; }
        h1, h2 { color: #2c3e50; }
        .chart { width: 600px; height: 400px; }
    </style>
</head>
<body>
    <h1>ðŸŽ‰ Your Bash History Wrapped ðŸŽ‰</h1>
    <div class="section">
        <h2>Most Used Commands</h2>
        <ul id="most-used-commands"></ul>
    </div>
    <div class="section">
        <h2>Longest Command Typed</h2>
        <p id="longest-command"></p>
    </div>
    <div class="section">
        <h2>Total Commands Run</h2>
        <p id="total-commands"></p>
    </div>
    <div class="section">
        <h2>First and Last Commands</h2>
        <p>First: <span id="first-command"></span></p>
        <p>Last: <span id="last-command"></span></p>
    </div>
    <div class="section">
        <h2>Peak Productivity Hours</h2>
        <canvas id="productivity-chart" class="chart"></canvas>
    </div>
    <div class="section">
        <h2>Most Active Day</h2>
        <p id="most-active-day"></p>
    </div>
    <div class="section">
        <h2>Weekend Commands</h2>
        <p id="weekend-commands"></p>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        fetch('/data')
            .then(response => response.json())
            .then(data => {
                // Most Used Commands
                const mostUsedList = document.getElementById('most-used-commands');
                data.command_counts.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = `${item[0]}: ${item[1]} times`;
                    mostUsedList.appendChild(li);
                });

                // Longest Command
                document.getElementById('longest-command').textContent = data.longest_command;

                // Total Commands
                document.getElementById('total-commands').textContent = data.total_commands;

                // First and Last Commands
                document.getElementById('first-command').textContent = data.first_command;
                document.getElementById('last-command').textContent = data.last_command;

                // Most Active Day
                document.getElementById('most-active-day').textContent = data.most_active_day;

                // Weekend Commands
                document.getElementById('weekend-commands').textContent = `${data.weekend_commands} commands run on weekends`;

                // Productivity Chart
                const ctx = document.getElementById('productivity-chart').getContext('2d');
                const chart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [...Array(24).keys()],
                        datasets: [{
                            label: 'Commands per Hour',
                            data: data.hours,
                            backgroundColor: 'rgba(46, 204, 113, 0.5)',
                            borderColor: 'rgba(46, 204, 113, 1)',
                            borderWidth: 1,
                        }],
                    },
                    options: {
                        scales: {
                            x: { title: { display: true, text: 'Hour of Day' } },
                            y: { title: { display: true, text: 'Number of Commands' } },
                        },
                    },
                });
            });
    </script>
</body>
</html>